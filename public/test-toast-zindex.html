<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Z-Index Toasts</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1a1a1a;
            color: white;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .test-section {
            background: #2a2a2a;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        
        .test-button:hover {
            background: #0056b3;
        }
        
        .high-zindex-element {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 0, 0, 0.8);
            color: white;
            padding: 40px;
            border-radius: 8px;
            z-index: 5000;
            font-weight: bold;
        }
        
        .instructions {
            background: #1e3a8a;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        
        .status {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: #059669;
            padding: 10px 15px;
            border-radius: 6px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>🧪 Test Z-Index AlertDialog/Toasts</h1>
        
        <div class="instructions">
            <h3>📋 Instructions de Test</h3>
            <p>1. Cliquez sur les boutons ci-dessous pour déclencher des toasts</p>
            <p>2. Vérifiez que les toasts apparaissent AU-DESSUS de l'élément rouge</p>
            <p>3. Les toasts doivent être visibles en position top-right</p>
            <p>4. Si un toast est caché, le fix z-index n'est pas suffisant</p>
        </div>

        <div class="test-section">
            <h3>🎯 Tests de Base</h3>
            <button class="test-button" onclick="testBasicToast()">
                📢 Toast Basique
            </button>
            <button class="test-button" onclick="testSuccessToast()">
                ✅ Toast Succès
            </button>
            <button class="test-button" onclick="testWarningToast()">
                ⚠️ Toast Avertissement
            </button>
            <button class="test-button" onclick="testErrorToast()">
                ❌ Toast Erreur
            </button>
        </div>

        <div class="test-section">
            <h3>🔒 Tests Multi-Utilisateur</h3>
            <button class="test-button" onclick="testUserJoinToast()">
                👥 Utilisateur Connecté
            </button>
            <button class="test-button" onclick="testUserLeaveToast()">
                👋 Utilisateur Déconnecté
            </button>
            <button class="test-button" onclick="testCollabToast()">
                🤝 Notification Collaborative
            </button>
        </div>

        <div class="test-section">
            <h3>🎲 Tests de Stress</h3>
            <button class="test-button" onclick="testMultipleToasts()">
                📚 Toasts Multiples
            </button>
            <button class="test-button" onclick="testLongToast()">
                ⏱️ Toast Longue Durée
            </button>
            <button class="test-button" onclick="showHighZIndexElement()">
                🎯 Afficher Élément Z-Index Élevé
            </button>
        </div>
    </div>

    <!-- Élément avec z-index élevé pour tester -->
    <div id="highZIndexElement" class="high-zindex-element" style="display: none;">
        <h3>🔴 Élément Z-Index 5000</h3>
        <p>Les toasts doivent apparaître AU-DESSUS de cet élément</p>
        <button onclick="hideHighZIndexElement()" style="background: white; color: black; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
            Masquer
        </button>
    </div>

    <div class="status">
        ✅ Page de test chargée - Prêt pour les tests
    </div>

    <script>
        // Simuler l'API useToast pour les tests
        function createToast(message, color = 'info', duration = 3000) {
            // Créer un toast basique pour simuler Vuestic UI
            const toast = document.createElement('div');
            toast.className = 'va-toast test-toast';
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${getColorHex(color)};
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                z-index: 2147483648;
                font-size: 14px;
                max-width: 300px;
                margin-bottom: 10px;
                animation: slideIn 0.3s ease-out;
                cursor: pointer;
            `;
            
            // Ajouter l'animation CSS
            if (!document.getElementById('toast-styles')) {
                const style = document.createElement('style');
                style.id = 'toast-styles';
                style.textContent = `
                    @keyframes slideIn {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOut {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
            
            toast.innerHTML = `
                <div style="display: flex; align-items: center; gap: 8px;">
                    <span>${getIcon(color)}</span>
                    <span>${message}</span>
                    <button onclick="this.parentElement.parentElement.remove()" style="background: none; border: none; color: white; cursor: pointer; font-size: 16px; margin-left: auto;">×</button>
                </div>
            `;
            
            document.body.appendChild(toast);
            
            // Auto-remove après durée spécifiée
            if (duration > 0) {
                setTimeout(() => {
                    if (toast.parentElement) {
                        toast.style.animation = 'slideOut 0.3s ease-in';
                        setTimeout(() => toast.remove(), 300);
                    }
                }, duration);
            }
        }
        
        function getColorHex(color) {
            const colors = {
                info: '#3b82f6',
                success: '#10b981',
                warning: '#f59e0b',
                danger: '#ef4444',
                error: '#ef4444'
            };
            return colors[color] || colors.info;
        }
        
        function getIcon(color) {
            const icons = {
                info: 'ℹ️',
                success: '✅',
                warning: '⚠️',
                danger: '❌',
                error: '❌'
            };
            return icons[color] || icons.info;
        }
        
        // Tests de base
        function testBasicToast() {
            createToast('Toast basique - Test z-index', 'info');
        }
        
        function testSuccessToast() {
            createToast('Opération réussie !', 'success');
        }
        
        function testWarningToast() {
            createToast('Attention : vérifiez la visibilité', 'warning');
        }
        
        function testErrorToast() {
            createToast('Erreur : toast caché ?', 'error');
        }
        
        // Tests multi-utilisateur
        function testUserJoinToast() {
            createToast('👤 Jean Dupont s\'est connecté au planning', 'success');
        }
        
        function testUserLeaveToast() {
            createToast('👋 Marie Martin a quitté le planning', 'info');
        }
        
        function testCollabToast() {
            createToast('🤝 Nouvelle activité collaborative détectée', 'info');
        }
        
        // Tests de stress
        function testMultipleToasts() {
            createToast('Toast 1/3', 'info', 5000);
            setTimeout(() => createToast('Toast 2/3', 'warning', 5000), 500);
            setTimeout(() => createToast('Toast 3/3', 'success', 5000), 1000);
        }
        
        function testLongToast() {
            createToast('Toast longue durée - Teste si visible pendant 10 secondes', 'info', 10000);
        }
        
        function showHighZIndexElement() {
            document.getElementById('highZIndexElement').style.display = 'block';
            setTimeout(() => {
                testBasicToast();
                createToast('Ce toast doit être visible AU-DESSUS de l\'élément rouge !', 'warning', 8000);
            }, 1000);
        }
        
        function hideHighZIndexElement() {
            document.getElementById('highZIndexElement').style.display = 'none';
        }
        
        // Test automatique au chargement
        window.addEventListener('load', () => {
            setTimeout(() => {
                createToast('🎉 Page de test chargée - Z-index fix actif', 'success', 2000);
            }, 1000);
        });
    </script>
</body>
</html>
